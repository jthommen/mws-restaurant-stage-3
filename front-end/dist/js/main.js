let restaurants,neighborhoods,cuisines,map,observer,mapLoaded=!1,markers=[];function onIntersection(e){e.forEach(e=>{e.intersectionRatio>0&&(observer.unobserve(e.target),e.target.getAttribute("data-src")&&e.target.setAttribute("src",e.target.getAttribute("data-src")))})}document.addEventListener("DOMContentLoaded",e=>{document.getElementById("map").addEventListener("click",initMap),document.getElementById("cuisines-select").addEventListener("change",e=>{mapLoaded||initMap()}),document.getElementById("neighborhoods-select").addEventListener("change",e=>{mapLoaded||initMap()}),LocalState.checkforIDBData({name:"restaurants",object_type:"restaurants"},(e,t)=>{console.log("Initial Load finished!"),fetchNeighborhoods(),fetchCuisines(),registerServiceWorker(),updateRestaurants()})}),registerServiceWorker=(()=>{navigator.serviceWorker&&navigator.serviceWorker.register("./service-worker.js").then(()=>{console.log("Service Worker: Registered!")}).catch(e=>{console.log(`Service Worker: Registration failed: ${e}`)})}),fetchNeighborhoods=(()=>{LocalState.getNeighborhoods((e,t)=>{e?console.error(e):(self.neighborhoods=t,fillNeighborhoodsHTML())})}),fillNeighborhoodsHTML=((e=self.neighborhoods)=>{const t=document.getElementById("neighborhoods-select");e.forEach(e=>{const r=document.createElement("option");r.innerHTML=e,r.value=e,t.append(r)})}),fetchCuisines=(()=>{LocalState.getCuisines((e,t)=>{e?console.error(e):(self.cuisines=t,fillCuisinesHTML())})}),fillCuisinesHTML=((e=self.cuisines)=>{const t=document.getElementById("cuisines-select");e.forEach(e=>{const r=document.createElement("option");r.innerHTML=e,r.value=e,t.append(r)})}),initMap=(()=>{self.map=new google.maps.Map(document.getElementById("map"),{zoom:12,center:{lat:40.722216,lng:-73.987501},scrollwheel:!1}),updateRestaurants(),mapLoaded=!0}),updateRestaurants=(()=>{const e=document.getElementById("cuisines-select"),t=document.getElementById("neighborhoods-select"),r=e.selectedIndex,a=t.selectedIndex,o=e[r].value,s=t[a].value;LocalState.getRestaurantByCuisineAndNeighborhood(o,s,(e,t)=>{e?console.error(e):(resetRestaurants(t),fillRestaurantsHTML())})}),lazyLoadingObserver=(()=>{const e=document.querySelectorAll(".restaurant-img");observer=new IntersectionObserver(onIntersection,{rootMargin:"50px 0px",threshold:.01}),e.forEach(e=>observer.observe(e))}),resetRestaurants=(e=>{self.restaurants=[],document.getElementById("restaurants-list").innerHTML="",mapLoaded&&self.markers.forEach(e=>e.setMap(null)),self.markers=[],self.restaurants=e}),fillRestaurantsHTML=((e=self.restaurants)=>{const t=document.getElementById("restaurants-list");e.forEach(e=>{t.append(createRestaurantHTML(e))}),mapLoaded&&addMarkersToMap(),lazyLoadingObserver()}),placeholder_img="data:image/png;base64,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",createRestaurantHTML=(e=>{const t=document.createElement("li"),r=document.createElement("img");r.className="restaurant-img",r.setAttribute("src",placeholder_img);const a=LocalState.getImageUrlForRestaurant(e);/undefined/.test(a)?(r.setAttribute("data-src","/img/icons/icon-placeholder.png"),console.log("Image undefined!")):r.setAttribute("data-src",a),r.setAttribute("alt",`Restaurant ${e.name}`),t.append(r);const o=document.createElement("h3");o.innerHTML=e.name,t.append(o);const s=document.createElement("p");s.innerHTML=e.neighborhood,t.append(s);const n=document.createElement("p");n.innerHTML=e.address,t.append(n);const i=document.createElement("a");i.innerHTML="View Details",i.href=LocalState.getUrlForRestaurant(e),t.append(i);const c=document.createElement("img");return c.setAttribute("alt","Heart"),c.classList.add("favorize"),c.id=e.id,!0===e.is_favorite||"true"===e.is_favorite?(c.setAttribute("src","/img/icons/favorized.svg"),c.classList.add("favorized")):c.setAttribute("src","/img/icons/favorite.svg"),c.onclick=function(){this.classList.contains("favorized")?(this.src="/img/icons/favorite.svg",this.classList.remove("favorized"),LocalState.toggleFavorite(!1,this.id)):(this.src="/img/icons/favorized.svg",this.classList.add("favorized"),LocalState.toggleFavorite(!0,this.id))},t.append(c),t}),addMarkersToMap=((e=self.restaurants)=>{e.forEach(e=>{const t=LocalState.getMapMarkerForRestaurant(e,self.map);google.maps.event.addListener(t,"click",()=>{window.location.href=t.url}),self.markers.push(t)})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsicmVzdGF1cmFudHMiLCJuZWlnaGJvcmhvb2RzIiwiY3Vpc2luZXMiLCJtYXJrZXJzIiwib2JzZXJ2ZXIiLCJvbkludGVyc2VjdGlvbiIsImVudHJpZXMiLCJlbnRyeSIsImludGVyc2VjdGlvblJhdGlvIiwidW5vYnNlcnZlIiwidGFyZ2V0Iiwic2V0QXR0cmlidXRlIiwiZ2V0QXR0cmlidXRlIiwibmFtZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbml0TWFwIiwiZSIsIm1hcExvYWRlZCIsImZldGNoQ3Vpc2luZXMiLCJvYmplY3RfdHlwZSIsInJlZ2lzdGVyU2VydmljZVdvcmtlciIsInVwZGF0ZVJlc3RhdXJhbnRzIiwiY29uc29sZSIsInNlcnZpY2VXb3JrZXIiLCJuYXZpZ2F0b3IiLCJyZWdpc3RlciIsInRoZW4iLCJsb2ciLCJjYXRjaCIsImVyciIsImVycm9yIiwiTG9jYWxTdGF0ZSIsImdldE5laWdoYm9yaG9vZHMiLCJzZWxmIiwiZmlsbE5laWdoYm9yaG9vZHNIVE1MIiwib3B0aW9uIiwiaW5uZXJIVE1MIiwibmVpZ2hib3Job29kIiwiZm9yRWFjaCIsInNlbGVjdCIsImNyZWF0ZUVsZW1lbnQiLCJ2YWx1ZSIsImFwcGVuZCIsImZpbGxDdWlzaW5lc0hUTUwiLCJjdWlzaW5lIiwibGF0IiwiY2VudGVyIiwibG9jIiwiZ29vZ2xlIiwibWFwcyIsIk1hcCIsInNjcm9sbHdoZWVsIiwibWFwIiwiY1NlbGVjdCIsImNJbmRleCIsInNlbGVjdGVkSW5kZXgiLCJnZXRSZXN0YXVyYW50QnlDdWlzaW5lQW5kTmVpZ2hib3Job29kIiwiZmlsbFJlc3RhdXJhbnRzSFRNTCIsImxhenlMb2FkaW5nT2JzZXJ2ZXIiLCJyZXN0YXVyYW50SW1hZ2VzIiwib2JzZXJ2ZXJDb25maWciLCJxdWVyeVNlbGVjdG9yQWxsIiwidGhyZXNob2xkIiwiaW1hZ2UiLCJvYnNlcnZlIiwidWwiLCJtIiwic2V0TWFwIiwicmVzdGF1cmFudCIsImNyZWF0ZVJlc3RhdXJhbnRIVE1MIiwiYWRkTWFya2Vyc1RvTWFwIiwicGxhY2Vob2xkZXJfaW1nIiwiY2xhc3NOYW1lIiwiaW1hZ2VVcmwiLCJnZXRJbWFnZVVybEZvclJlc3RhdXJhbnQiLCJ0ZXN0IiwibGkiLCJhZGRyZXNzIiwibW9yZSIsImhyZWYiLCJnZXRVcmxGb3JSZXN0YXVyYW50IiwiZmF2b3JpemUiLCJjbGFzc0xpc3QiLCJpZCIsImFkZCIsImlzX2Zhdm9yaXRlIiwib25jbGljayIsInRoaXMiLCJyZW1vdmUiLCJ0b2dnbGVGYXZvcml0ZSIsIm1hcmtlciIsIndpbmRvdyIsImxvY2F0aW9uIiwiYWRkTGlzdGVuZXIiLCJ1cmwiLCJwdXNoIl0sIm1hcHBpbmdzIjoiQUFBQSxJQUFJQSxZQUdKQyxjQUNBQyxTQUNJQyxJQUlKQyxTQUhJQSxXQUFKLEVBRElELFdBNklKLFNBQVNFLGVBQWVDLEdBR3BCQSxFQUFJQyxRQUFNQyxJQUFORCxFQUFNQyxrQkFBb0IsSUFFL0JKLFNBQVNLLFVBQVVGLEVBQU1HLFFBR3hCSCxFQUFNRyxPQUFPQyxhQUFhLGFBQzFCSixFQUFBRyxPQUFBQyxhQUFBLE1BQUFKLEVBQUFHLE9BQUFFLGFBQUEsZ0JBOUlGQyxTQUFNQyxpQkFERyxtQkFBQUMsSUFVVEMsU0FGREMsZUFBQSxPQUFBSCxpQkFBQSxRQUFBSSxTQUdBRixTQUFTQyxlQUFlLG1CQUFBSCxpQkFBd0JBLFNBQWlCSyxJQUM3REMsV0FBSEYsWUFEREYsU0FBU0MsZUFBZSx3QkFBd0JILGlCQUFpQixTQUFXSyxJQUk1RUMsV0FBQUYsWUFJQ0csV0FBQUEsaUJBbEJBUixLQUFNLGNBSVBTLFlBQUEsZUFjQ0QsQ0FBQUEsRUFBQUEsS0FDQUUsUUFBQUEsSUFBQUEsMEJBQ0FDLHFCQUxESCxnQkFsQkRFLHdCQXVCRUMsd0JBVUFELHNCQUFrQixNQUNsQkUsVUFBYUMsZUFDYkMsVUFKREQsY0FBQUUsU0FBQSx1QkFBQUMsS0FBQSxLQUZE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QyxRQUFBK0YsS0FBQUwiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImxldCByZXN0YXVyYW50cyxcclxuXHRuZWlnaGJvcmhvb2RzLFxyXG5cdGN1aXNpbmVzO1xyXG5sZXQgbWFwO1xyXG5sZXQgbWFwTG9hZGVkID0gZmFsc2U7XHJcbmxldCBtYXJrZXJzID0gW107XHJcbmxldCBvYnNlcnZlcjtcclxuXHJcblxyXG4vLyBSZWdpc3RlciBzZXJ2aWNlIHdvcmtlciBhbmQgZmV0Y2ggbmVpZ2hib3Job29kcyAmIGN1aXNpbmVzXHJcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCAoZXZlbnQpID0+IHtcclxuXHJcblx0bGV0IGFwaSA9IHtcclxuXHRcdG5hbWU6ICdyZXN0YXVyYW50cycsXHJcblx0XHRvYmplY3RfdHlwZTogJ3Jlc3RhdXJhbnRzJ1xyXG5cdH07XHJcblxyXG5cdC8vIEF0dGFjaCBFdmVudEhhbmRsZXJzXHJcblx0Ly8gSW5pdGlhbGl6ZSBHb29nbGUgTWFwIG9uIGNsaWNrIG9yIGNoYW5nZSBmaWx0ZXJcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBpbml0TWFwKTtcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3Vpc2luZXMtc2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcclxuXHRcdGlmKCFtYXBMb2FkZWQpIGluaXRNYXAoKTtcclxuXHR9KTtcclxuXHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKS5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoZSkgPT4ge1xyXG5cdFx0aWYoIW1hcExvYWRlZCkgaW5pdE1hcCgpO1xyXG5cdH0pO1xyXG5cclxuXHQvLyBTdGFydCBsb2FkaW5nIGRhdGFcclxuXHRMb2NhbFN0YXRlLmNoZWNrZm9ySURCRGF0YShhcGksIChlcnJvciwgZGF0YSkgPT4ge1xyXG5cdFx0Y29uc29sZS5sb2coJ0luaXRpYWwgTG9hZCBmaW5pc2hlZCEnKTtcclxuXHRcdGZldGNoTmVpZ2hib3Job29kcygpO1xyXG5cdFx0ZmV0Y2hDdWlzaW5lcygpO1xyXG5cdFx0cmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XHJcblx0XHR1cGRhdGVSZXN0YXVyYW50cygpO1xyXG5cdH0pO1xyXG5cclxufSk7XHJcblxyXG4vLyBSZWdpc3RlciBzZXJ2aWNlIHdvcmtlclxyXG5yZWdpc3RlclNlcnZpY2VXb3JrZXIgPSAoKSA9PiB7XHJcblx0aWYoIW5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSByZXR1cm47XHJcblx0bmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoJy4vc2VydmljZS13b3JrZXIuanMnKS50aGVuKCAoKSA9PiB7XHJcblx0XHRjb25zb2xlLmxvZygnU2VydmljZSBXb3JrZXI6IFJlZ2lzdGVyZWQhJyk7XHJcblx0fSkuY2F0Y2goIChlcnIpID0+IHtcclxuXHRcdGNvbnNvbGUubG9nKGBTZXJ2aWNlIFdvcmtlcjogUmVnaXN0cmF0aW9uIGZhaWxlZDogJHtlcnJ9YCk7XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBGZXRjaCBuZWlnaGJvcmhvb2RzIGFuZCBzZXQgdGhlaXIgSFRNTFxyXG5mZXRjaE5laWdoYm9yaG9vZHMgPSAoKSA9PiB7XHJcblx0TG9jYWxTdGF0ZS5nZXROZWlnaGJvcmhvb2RzKChlcnJvciwgbmVpZ2hib3Job29kcykgPT4ge1xyXG5cdFx0aWYgKGVycm9yKSB7IC8vIEdvdCBhbiBlcnJvclxyXG5cdFx0XHRjb25zb2xlLmVycm9yKGVycm9yKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHNlbGYubmVpZ2hib3Job29kcyA9IG5laWdoYm9yaG9vZHM7XHJcblx0XHRcdGZpbGxOZWlnaGJvcmhvb2RzSFRNTCgpO1xyXG5cdFx0fVxyXG5cdH0pO1xyXG59O1xyXG5cclxuLy8gU2V0IG5laWdoYm9yaG9vZCBIVE1MXHJcbmZpbGxOZWlnaGJvcmhvb2RzSFRNTCA9IChuZWlnaGJvcmhvb2RzID0gc2VsZi5uZWlnaGJvcmhvb2RzKSA9PiB7XHJcblx0Y29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25laWdoYm9yaG9vZHMtc2VsZWN0Jyk7XHJcblx0bmVpZ2hib3Job29kcy5mb3JFYWNoKG5laWdoYm9yaG9vZCA9PiB7XHJcblx0XHRjb25zdCBvcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKTtcclxuXHRcdG9wdGlvbi5pbm5lckhUTUwgPSBuZWlnaGJvcmhvb2Q7XHJcblx0XHRvcHRpb24udmFsdWUgPSBuZWlnaGJvcmhvb2Q7XHJcblx0XHRzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBGZXRjaCBzdWllaW5lcyBhbmQgc2V0IHRoZWlyIEhUTUxcclxuZmV0Y2hDdWlzaW5lcyA9ICgpID0+IHtcclxuXHRMb2NhbFN0YXRlLmdldEN1aXNpbmVzKChlcnJvciwgY3Vpc2luZXMpID0+IHtcclxuXHRcdGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c2VsZi5jdWlzaW5lcyA9IGN1aXNpbmVzO1xyXG5cdFx0XHRmaWxsQ3Vpc2luZXNIVE1MKCk7XHJcblx0XHR9XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBTZXQgY3Vpc2luZSBIVE1MXHJcbmZpbGxDdWlzaW5lc0hUTUwgPSAoY3Vpc2luZXMgPSBzZWxmLmN1aXNpbmVzKSA9PiB7XHJcblx0Y29uc3Qgc2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG5cclxuXHRjdWlzaW5lcy5mb3JFYWNoKGN1aXNpbmUgPT4ge1xyXG5cdFx0Y29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XHJcblx0XHRvcHRpb24uaW5uZXJIVE1MID0gY3Vpc2luZTtcclxuXHRcdG9wdGlvbi52YWx1ZSA9IGN1aXNpbmU7XHJcblx0XHRzZWxlY3QuYXBwZW5kKG9wdGlvbik7XHJcblx0fSk7XHJcbn07XHJcblxyXG4vLyBJbml0aWFsaXplIEdvb2dsZSBNYXBzLCBjYWxsZWQgZnJvbSBIVE1MLCB1cGRhdGUgcmVzdGF1cmFudHNcclxuaW5pdE1hcCA9ICgpID0+IHtcclxuXHRsZXQgbG9jID0ge1xyXG5cdFx0bGF0OiA0MC43MjIyMTYsXHJcblx0XHRsbmc6IC03My45ODc1MDFcclxuXHR9O1xyXG5cdHNlbGYubWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwJyksIHtcclxuXHRcdHpvb206IDEyLFxyXG5cdFx0Y2VudGVyOiBsb2MsXHJcblx0XHRzY3JvbGx3aGVlbDogZmFsc2VcclxuXHR9KTtcclxuXHQvLyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbWFwLXBsYWNlaG9sZGVyJykucmVtb3ZlKCk7XHJcblx0dXBkYXRlUmVzdGF1cmFudHMoKTtcclxuXHRtYXBMb2FkZWQgPSB0cnVlO1xyXG59O1xyXG5cclxuLy8gVXBkYXRlIHBhZ2UgYW5kIG1hcCBmb3IgY3VycmVudCByZXN0YXVyYW50c1xyXG51cGRhdGVSZXN0YXVyYW50cyA9ICgpID0+IHtcclxuXHRjb25zdCBjU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2N1aXNpbmVzLXNlbGVjdCcpO1xyXG5cdGNvbnN0IG5TZWxlY3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmVpZ2hib3Job29kcy1zZWxlY3QnKTtcclxuXHJcblx0Y29uc3QgY0luZGV4ID0gY1NlbGVjdC5zZWxlY3RlZEluZGV4O1xyXG5cdGNvbnN0IG5JbmRleCA9IG5TZWxlY3Quc2VsZWN0ZWRJbmRleDtcclxuXHJcblx0Y29uc3QgY3Vpc2luZSA9IGNTZWxlY3RbY0luZGV4XS52YWx1ZTtcclxuXHRjb25zdCBuZWlnaGJvcmhvb2QgPSBuU2VsZWN0W25JbmRleF0udmFsdWU7XHJcblxyXG5cdExvY2FsU3RhdGUuZ2V0UmVzdGF1cmFudEJ5Q3Vpc2luZUFuZE5laWdoYm9yaG9vZChjdWlzaW5lLCBuZWlnaGJvcmhvb2QsIChlcnJvciwgcmVzdGF1cmFudHMpID0+IHtcclxuXHRcdGlmIChlcnJvcikgeyAvLyBHb3QgYW4gZXJyb3IhXHJcblx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmVzZXRSZXN0YXVyYW50cyhyZXN0YXVyYW50cyk7XHJcblx0XHRcdGZpbGxSZXN0YXVyYW50c0hUTUwoKTtcclxuXHRcdH1cclxuXHR9KTtcclxufTtcclxuXHJcbi8vIEltYWdlIGxhenkgbG9hZGluZ1xyXG5cclxuLy8gQXR0YWNoIG9ic2VydmVyIGZvciBpbWFnZSBsYXp5IGxvYWRpbmdcclxubGF6eUxvYWRpbmdPYnNlcnZlciA9ICgpID0+IHtcclxuXHRjb25zdCByZXN0YXVyYW50SW1hZ2VzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnJlc3RhdXJhbnQtaW1nJyk7XHJcblx0Y29uc3Qgb2JzZXJ2ZXJDb25maWcgPSB7XHJcblx0XHRyb290TWFyZ2luOiAnNTBweCAwcHgnLFxyXG5cdFx0dGhyZXNob2xkOiAwLjAxXHJcblx0fTtcclxuXHRvYnNlcnZlciA9IG5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcihvbkludGVyc2VjdGlvbiwgb2JzZXJ2ZXJDb25maWcpO1xyXG5cdHJlc3RhdXJhbnRJbWFnZXMuZm9yRWFjaCggaW1hZ2UgPT4gb2JzZXJ2ZXIub2JzZXJ2ZShpbWFnZSkpO1xyXG59O1xyXG5cclxuLy8gTGF6eSBsb2FkIGltYWdlcyBvbmNlIHJlc3Qgb2YgdGhlIHBhZ2UgaGFzIGZ1bGx5IGxvYWRlZFxyXG5mdW5jdGlvbiBvbkludGVyc2VjdGlvbihlbnRyaWVzKSB7XHJcblxyXG5cdGVudHJpZXMuZm9yRWFjaChlbnRyeSA9PiB7XHJcblx0ICBcdGlmIChlbnRyeS5pbnRlcnNlY3Rpb25SYXRpbyA+IDApIHtcclxuXHJcblx0XHRcdG9ic2VydmVyLnVub2JzZXJ2ZShlbnRyeS50YXJnZXQpO1xyXG5cclxuXHRcdFx0aWYoZW50cnkudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKSkge1xyXG5cdFx0XHRcdGVudHJ5LnRhcmdldC5zZXRBdHRyaWJ1dGUoJ3NyYycsIGVudHJ5LnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJykpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fSk7XHJcbiAgfVxyXG5cclxuXHJcbi8vIENsZWFyIGN1cnJlbnQgcmVzdGF1cmFudHMsIGZpbHRlciBhbmQgbWFwIG1hcmtlclxyXG5yZXNldFJlc3RhdXJhbnRzID0gKHJlc3RhdXJhbnRzKSA9PiB7XHJcblx0Ly8gUmVtb3ZlIGFsbCByZXN0YXVyYW50c1xyXG5cdHNlbGYucmVzdGF1cmFudHMgPSBbXTtcclxuXHRjb25zdCB1bCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXN0YXVyYW50cy1saXN0Jyk7XHJcblx0dWwuaW5uZXJIVE1MID0gJyc7XHJcblxyXG5cdC8vIFJlbW92ZSBhbGwgbWFwIG1hcmtlcnNcclxuXHRpZihtYXBMb2FkZWQpIHNlbGYubWFya2Vycy5mb3JFYWNoKG0gPT4gbS5zZXRNYXAobnVsbCkpO1xyXG5cdHNlbGYubWFya2VycyA9IFtdO1xyXG5cdHNlbGYucmVzdGF1cmFudHMgPSByZXN0YXVyYW50cztcclxufTtcclxuXHJcbi8vIENyZWF0ZSBhbGwgcmVzdGF1cmFudCBIVE1MIGFuZCBtYXJrZXIgYW5kIGFkZCBpdCB0byB0aGUgcGFnZVxyXG5maWxsUmVzdGF1cmFudHNIVE1MID0gKHJlc3RhdXJhbnRzID0gc2VsZi5yZXN0YXVyYW50cykgPT4ge1xyXG5cdGNvbnN0IHVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jlc3RhdXJhbnRzLWxpc3QnKTtcclxuXHRyZXN0YXVyYW50cy5mb3JFYWNoKHJlc3RhdXJhbnQgPT4ge1xyXG5cdFx0dWwuYXBwZW5kKGNyZWF0ZVJlc3RhdXJhbnRIVE1MKHJlc3RhdXJhbnQpKTtcclxuXHR9KTtcclxuXHRpZihtYXBMb2FkZWQpIGFkZE1hcmtlcnNUb01hcCgpO1xyXG5cdGxhenlMb2FkaW5nT2JzZXJ2ZXIoKTtcclxufTtcclxuXHJcbi8vIENyZWF0ZSByZXN0YXVyYW50IEhUTUxcclxuLy8gUGxhY2Vob2xkZXIgaW1hZ2UgZm9yIGltYWdlIGxhenkgbG9hZGluZ1xyXG5wbGFjZWhvbGRlcl9pbWcgPSAnZGF0YTppbWFnZS9wbmc7YmFzZTY0LGlWQk9SdzBLR2dvQUFBQU5TVWhFVWdBQUFBRUFBQUFCQ0FZQUFBQWZGY1NKQUFBS3MybERRMUJKUTBNZ1VISnZabWxzWlFBQVNJbVZsZ2RVazhrV3grZjcwaHN0RUFFcG9YZWtFMEI2RFVXUURxSVNrZ0NoaEpnUW1oMVpYTUcxSUNJQ05uUVJSTUZWS2JLb2lBWGJvcWlBZlVFV0FXVVZDNkNpOGo3Z0VYZmZPKys5ODI3T25Qdkx6WjA3ZHlZejUvd0JJQSt6QklJVVdBYUFWSDY2TU5qYmpSNFpGVTNIUFFjd1FBTlpvQVRJTExaSTRCb1U1QThRbS9kL3Q0a2VBTTM0ZXlZenRmNzk5Lzlxc2h5dWlBMEFGSVJ3SEVmRVRrWDREREk2MlFKaE9nQ29QQ1N1bFprdW1PRnFoT1dGU0lNSXQ4NXd3aHpmbWVHNE9mNWpOaWMwMkIzaGp3RGd5U3lXTUFFQU1ocUowelBZQ1VnZHNqYkNabndPajQ5d0tNSk83RVFXQitGaWhJMVRVOU5tdUExaC9iaS8xRW40VzgwNFNVMFdLMEhDYzN1Wk5id0hUeVJJWVdYL244Znh2eTAxUlR5L2hoWXl5SWxDbjJERUs4K2NXM0thbjRUNWNVc0M1NW5IbWMyZjVVU3hUOWc4czBYdTBmUE1ZWG40U2VhbUxQR2Y1M2llRjFOU0o1MFpPcy9DdEdCSmZhN0lNMlNlV2NMdmE0bVR3MXdsNjNLWmtwbzVpYUVSODV6QkMxOHl6NkxrRUwvdk9lNlN1RkFjTE9rNVh1Z2wyV09xNkMvNzRqRWwrZW1Kb1Q2U1BiSys5OFlWUlVwNjRIQTlQQ1Z4ZnBna1I1RHVKcWt2U0FtUzVITlR2Q1Z4VVVhSVpHNDZjdG0rencyU25FOFN5emRvbmtFQWNBUG13QWJZSWQ0STBQL3lBZW5jclBTWlRiaW5DYktGdklURWRMb3I4b3E0ZENhZmJXcE10ekF6WndBdzh5Ym4vdkwzRDJiZkdrVERmNC9GV1FKZzVZUUVLNzdIVXBIek9uY2ZBQkx1ZTB3UE9SL0thd0N1RnJERndveTUyTXkxQlJoQUJOSkFIbm50YXNpZDBnY213QUxwMVFHNEFFL2dDd0pCS0lnQ0t3QWJKSUpVSUFTWllBM1lDUEpCSWRnQmRvTXljQUFjQnRYZ0JEZ0Zta0FydUFpdWdwdmdEdWdHajBFZkdBU3Z3QmlZQUZNUUJPRWdDa1NGbENCMVNBY3lnaXdnQnVRRWVVTCtVREFVQmNWQ0NSQWZFa05yb0UxUUlWUUVsVUdIb0Jyb0YrZ3NkQkc2RG5WQkQ2RithQVI2QjMyR1VUQVpsb2RWWVYxNEVjeUFYV0UvT0JSZURpZkFxK0FjT0EvZUJwZkNsZkJ4dUJHK0NOK0V1K0UrK0JVOGpnSW9Fb3FHMGtDWm9CZ29kMVFnS2hvVmp4S2kxcUVLVUNXb1NsUWRxZ1hWZ2JxSDZrT05vajZoc1dncW1vNDJRVHVnZmRCaGFEWjZGWG9kZWl1NkRGMk5ia1JmUnQ5RDk2UEgwTjh3Rkl3S3hnaGpqMkZpSWpFSm1FeE1QcVlFVTRWcHdGekJkR01HTVJOWUxKYUcxY1BhWW4yd1VkZ2s3R3JzVnV3K2JEMjJEZHVGSGNDTzQzQTRKWndSemhFWGlHUGgwbkg1dUwyNDQ3Z0x1THU0UWR4SFBBbXZqcmZBZStHajhYeDhMcjRFZnd4L0huOFhQNFNmSXNnUWRBajJoRUFDaDVCTjJFNDRRbWdoM0NZTUVxYUlza1E5b2lNeGxKaEUzRWdzSmRZUnJ4Q2ZFTitUU0NSTmtoMXBLWWxIMmtBcUpaMGtYU1Axa3o2UjVjaUdaSGR5REZsTTNrWStTbTRqUHlTL3AxQW91aFFYU2pRbG5iS05Va081UkhsRytTaEZsVEtWWWtweHBOWkxsVXMxU3QyVmVpMU5rTmFSZHBWZUlaMGpYU0o5V3ZxMjlLZ01RVVpYeGwyR0piTk9wbHptckV5dnpMZ3NWZFpjTmxBMlZYYXI3REhaNjdMRGNqZzVYVGxQT1k1Y250eGh1VXR5QTFRVVZZdnFUbVZUTjFHUFVLOVFCK1d4OG5yeVRQa2srVUw1RS9LZDhtTUtjZ3BXQ3VFS1dRcmxDdWNVK21nb21pNk5TVXVoYmFlZG92WFFQaTlRWGVDNmdMdGd5NEs2QlhjWFRDb3VWSFJSNUNvV0tOWXJkaXQrVnFJcmVTb2xLKzFVYWxKNnFveFdObFJlcXB5cHZGLzVpdkxvUXZtRkRndlpDd3NXbmxyNFNBVldNVlFKVmxtdGNsamxsc3E0cXBxcXQ2cEFkYS9xSmRWUk5acWFpMXFTV3JIYWViVVJkYXE2a3pwUHZWajlndnBMdWdMZGxaNUNMNlZmcG85cHFHajRhSWcxRG1sMGFreHA2bW1HYWVacTFtcysxU0pxTWJUaXRZcTEyclhHdE5XMUE3VFhhTmRxUDlJaDZEQjBFblgyNkhUb1RPcnE2VWJvYnRadDBoM1dVOVJqNnVYbzFlbzkwYWZvTyt1djBxL1V2MitBTldBWUpCdnNNN2hqQ0J0YUd5WWFsaHZlTm9LTmJJeDRSdnVNdW93eHhuYkdmT05LNDE0VHNvbXJTWVpKclVtL0tjM1UzelRYdE1uMDlTTHRSZEdMZGk3cVdQVE56Tm9zeGV5STJXTnpPWE5mODF6ekZ2TjNGb1lXYkl0eWkvdVdGRXN2eS9XV3paWnZyWXlzdUZiN3JSNVlVNjBEckRkYnQxdC90YkcxRWRyVTJZellhdHZHMmxiWTlqTGtHVUdNcll4cmRoZzdON3YxZHExMm4reHQ3TlB0VDltL2NUQnhTSFk0NWpDOFdHOHhkL0dSeFFPT21vNHN4ME9PZlU1MHAxaW5nMDU5emhyT0xPZEs1K2N1V2k0Y2x5cVhJVmNEMXlUWDQ2NnYzY3pjaEc0TmJwUHU5dTVyM2RzOFVCN2VIZ1Vlblo1eW5tR2VaWjdQdkRTOUVyeHF2Y2E4cmIxWGU3ZjVZSHo4ZkhiNjlESlZtV3htRFhQTTE5WjNyZTlsUDdKZmlGK1ozM04vUTMraGYwc0FIT0Fic0N2Z3lSS2RKZndsVFlFZ2tCbTRLL0Jwa0Y3UXFxQmZsMktYQmkwdFgvb2kyRHg0VFhCSENEVmtaY2l4a0lsUXQ5RHRvWS9EOU1QRVllM2gwdUV4NFRYaGt4RWVFVVVSZlpHTEl0ZEczb3hTanVKRk5VZmpvc09qcTZMSGwza3UyNzFzTU1ZNkpqK21aN25lOHF6bDExY29yMGhaY1c2bDlFcld5dE94bU5pSTJHT3hYMWlCckVyV2VCd3pyaUp1ak8zTzNzTit4WEhoRkhOR3VJN2NJdTVRdkdOOFVmeHdnbVBDcm9TUlJPZkVrc1JSbmp1dmpQYzJ5U2ZwUU5Ka2NtRHkwZVRwbElpVStsUjhhbXpxV2I0Y1A1bC9PVTB0TFN1dFMyQWt5QmYwcmJKZnRYdlZtTkJQV0NXQ1JNdEZ6ZW55aVBpNUpkWVgveUR1ejNES0tNLzRtQm1lZVRwTE5vdWZkU3ZiTUh0TDlsQ09WODdQcTlHcjJhdmIxMmlzMmJpbWY2M3Iya1Byb0hWeDY5clhhNjNQV3orNHdYdEQ5VWJpeHVTTnYrV2E1UmJsZnRnVXNha2xUelZ2UTk3QUQ5NC8xT1pMNVF2emV6YzdiRDd3SS9wSDNvK2RXeXkzN04zeXJZQlRjS1BRckxDazhNdFc5dFliUDVuL1ZQclQ5TGI0YlozYmJiYnYzNEhkd2QvUnM5TjVaM1dSYkZGTzBjQ3VnRjJOeGZUaWd1SVB1MWZ1dmw1aVZYSmdEM0dQZUU5ZnFYOXA4MTd0dlR2MmZpbExMT3N1ZHl1dnIxQ3AyRkl4dVkrejcrNStsLzExQjFRUEZCNzRmSkIzOE1FaDcwT05sYnFWSllleGh6TU92emdTZnFUalo4YlBOVlhLVllWVlg0L3lqL1pWQjFkZnJyR3RxVG1tY214N0xWd3JyaDA1SG5QOHpnbVBFODExSm5XSDZtbjFoU2ZCU2ZISmw3L0UvdEp6eXU5VSsybkc2Ym96T21jcUdxZ05CWTFRWTNialdGTmlVMTl6VkhQWFdkK3o3UzBPTFEyL212NTZ0RldqdGZ5Y3dybnQ1NG5uODg1UFg4aTVNTjRtYUJ1OW1IQnhvSDFsKytOTGtaZnVYMTU2dWZPSzM1VnJWNzJ1WHVwdzdiaHd6ZkZhNjNYNzYyZHZNRzQwM2JTNTJYakwrbGJEYjlhL05YVGFkRGJldHIzZGZNZnVUa3ZYNHE3emQ1M3ZYcnpuY2UvcWZlYjltOTFMdXJ0Nndub2U5TWIwOWozZ1BCaCttUEx3N2FPTVIxT1BOenpCUENsNEt2TzA1Sm5LczhyZkRYNnY3N1BwTzlmdjBYL3JlY2p6eHdQc2dWZC9pUDc0TXBqM2d2S2laRWg5cUdiWVlyaDF4R3ZrenN0bEx3ZGZDVjVOamViL0tmdG54V3Y5MTJmZXVMeTVOUlk1TnZoVytIYjYzZGIzU3UrUGZyRDYwRDRlTlA1c0luVmlhckxnbzlMSDZrK01UeDJmSXo0UFRXVit3WDBwL1dyd3RlV2IzN2NuMDZuVDB3S1drRFVyQlZESWdPUGpBWGgzRk5FSlVRQlFFVjFOWERhbm1XY05tdFA1c3dUK0U4L3A2bG16QWVCd0c2SmVYQUFJUS94QkpLUzdBYW1OZkE5Q1JxZ0xnQzB0SmVPZkpvcTN0SmlyUldwQ3BFbko5UFI3UkN2aURBRDQyanM5UGRVMFBmMjFDbW4yRVFCdEUzTmFmVmJIOEFDZ3VjOEluYTZUYjZUQnY5Zy9BUHp3QnRHK1ZxTjBBQUFBQ1hCSVdYTUFBQUJrQUFBQVpBRjRrZlZMQUFBQ0FHbFVXSFJZVFV3NlkyOXRMbUZrYjJKbExuaHRjQUFBQUFBQVBIZzZlRzF3YldWMFlTQjRiV3h1Y3pwNFBTSmhaRzlpWlRwdWN6cHRaWFJoTHlJZ2VEcDRiWEIwYXowaVdFMVFJRU52Y21VZ05TNDBMakFpUGdvZ0lDQThjbVJtT2xKRVJpQjRiV3h1Y3pweVpHWTlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5MekU1T1Rrdk1ESXZNakl0Y21SbUxYTjViblJoZUMxdWN5TWlQZ29nSUNBZ0lDQThjbVJtT2tSbGMyTnlhWEIwYVc5dUlISmtaanBoWW05MWREMGlJZ29nSUNBZ0lDQWdJQ0FnSUNCNGJXeHVjenBsZUdsbVBTSm9kSFJ3T2k4dmJuTXVZV1J2WW1VdVkyOXRMMlY0YVdZdk1TNHdMeUlLSUNBZ0lDQWdJQ0FnSUNBZ2VHMXNibk02ZEdsbVpqMGlhSFIwY0RvdkwyNXpMbUZrYjJKbExtTnZiUzkwYVdabUx6RXVNQzhpUGdvZ0lDQWdJQ0FnSUNBOFpYaHBaanBRYVhobGJGbEVhVzFsYm5OcGIyNCtOend2WlhocFpqcFFhWGhsYkZsRWFXMWxibk5wYjI0K0NpQWdJQ0FnSUNBZ0lEeGxlR2xtT2xCcGVHVnNXRVJwYldWdWMybHZiajQxUEM5bGVHbG1PbEJwZUdWc1dFUnBiV1Z1YzJsdmJqNEtJQ0FnSUNBZ0lDQWdQSFJwWm1ZNlQzSnBaVzUwWVhScGIyNCtNVHd2ZEdsbVpqcFBjbWxsYm5SaGRHbHZiajRLSUNBZ0lDQWdQQzl5WkdZNlJHVnpZM0pwY0hScGIyNCtDaUFnSUR3dmNtUm1PbEpFUmo0S1BDOTRPbmh0Y0cxbGRHRStDdTdkZm9jQUFBQU5TVVJCVkFnZFkyQ1lkZTAvQUFSK0FuQWpDa2tDQUFBQUFFbEZUa1N1UW1DQyc7XHJcblxyXG5jcmVhdGVSZXN0YXVyYW50SFRNTCA9IChyZXN0YXVyYW50KSA9PiB7XHJcblx0Y29uc3QgbGkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xyXG5cclxuXHRjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xyXG5cdGltYWdlLmNsYXNzTmFtZSA9ICdyZXN0YXVyYW50LWltZyc7XHJcblx0aW1hZ2Uuc2V0QXR0cmlidXRlKCdzcmMnLCBwbGFjZWhvbGRlcl9pbWcpO1xyXG5cclxuXHQvLyBDaGVjayBpZiBpbWFnZSBleGlzdHNcclxuXHRjb25zdCBpbWFnZVVybCA9IExvY2FsU3RhdGUuZ2V0SW1hZ2VVcmxGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQpO1xyXG5cdGNvbnN0IHJlZ2V4ID0gL3VuZGVmaW5lZC87XHJcblxyXG5cdGlmKCFyZWdleC50ZXN0KGltYWdlVXJsKSkge1xyXG5cdFx0aW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXNyYycsIGltYWdlVXJsKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0aW1hZ2Uuc2V0QXR0cmlidXRlKCdkYXRhLXNyYycsICcvaW1nL2ljb25zL2ljb24tcGxhY2Vob2xkZXIucG5nJyk7XHJcblx0XHRjb25zb2xlLmxvZygnSW1hZ2UgdW5kZWZpbmVkIScpO1xyXG5cdH1cclxuXHRcclxuXHRpbWFnZS5zZXRBdHRyaWJ1dGUoJ2FsdCcsIGBSZXN0YXVyYW50ICR7cmVzdGF1cmFudC5uYW1lfWApO1xyXG5cdGxpLmFwcGVuZChpbWFnZSk7XHJcblxyXG5cdGNvbnN0IG5hbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xyXG5cdG5hbWUuaW5uZXJIVE1MID0gcmVzdGF1cmFudC5uYW1lO1xyXG5cdGxpLmFwcGVuZChuYW1lKTtcclxuXHJcblx0Y29uc3QgbmVpZ2hib3Job29kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpO1xyXG5cdG5laWdoYm9yaG9vZC5pbm5lckhUTUwgPSByZXN0YXVyYW50Lm5laWdoYm9yaG9vZDtcclxuXHRsaS5hcHBlbmQobmVpZ2hib3Job29kKTtcclxuXHJcblx0Y29uc3QgYWRkcmVzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcclxuXHRhZGRyZXNzLmlubmVySFRNTCA9IHJlc3RhdXJhbnQuYWRkcmVzcztcclxuXHRsaS5hcHBlbmQoYWRkcmVzcyk7XHJcblxyXG5cdGNvbnN0IG1vcmUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcblx0bW9yZS5pbm5lckhUTUwgPSAnVmlldyBEZXRhaWxzJztcclxuXHRtb3JlLmhyZWYgPSBMb2NhbFN0YXRlLmdldFVybEZvclJlc3RhdXJhbnQocmVzdGF1cmFudCk7XHJcblx0bGkuYXBwZW5kKG1vcmUpO1xyXG5cclxuXHQvLyBUb2dnbGUgZmF2b3JpemUgaWNvblxyXG5cdGNvbnN0IGZhdm9yaXplID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XHJcblx0ZmF2b3JpemUuc2V0QXR0cmlidXRlKCdhbHQnLCAnSGVhcnQnKTtcclxuXHRmYXZvcml6ZS5jbGFzc0xpc3QuYWRkKCdmYXZvcml6ZScpO1xyXG5cdGZhdm9yaXplLmlkID0gcmVzdGF1cmFudC5pZDtcclxuXHJcblx0aWYocmVzdGF1cmFudC5pc19mYXZvcml0ZSA9PT0gdHJ1ZSB8fCByZXN0YXVyYW50LmlzX2Zhdm9yaXRlID09PSAndHJ1ZScpe1xyXG5cdFx0ZmF2b3JpemUuc2V0QXR0cmlidXRlKCdzcmMnLCAnL2ltZy9pY29ucy9mYXZvcml6ZWQuc3ZnJyk7IC8vIFRPRE86IEZpeCBidWcgb24gbG9hZCB3aXRoIHdyb25nIGNsYXNzXHJcblx0XHRmYXZvcml6ZS5jbGFzc0xpc3QuYWRkKCdmYXZvcml6ZWQnKTtcclxuXHR9IGVsc2Uge1xyXG5cdFx0ZmF2b3JpemUuc2V0QXR0cmlidXRlKCdzcmMnLCAnL2ltZy9pY29ucy9mYXZvcml0ZS5zdmcnKTtcclxuXHR9XHJcblxyXG5cdGZhdm9yaXplLm9uY2xpY2sgPSBmdW5jdGlvbiB0b2dnbGVGYXZvcml0ZSgpIHtcclxuXHRcdFxyXG5cdFx0aWYodGhpcy5jbGFzc0xpc3QuY29udGFpbnMoJ2Zhdm9yaXplZCcpKSB7XHJcblx0XHRcdHRoaXMuc3JjID0gJy9pbWcvaWNvbnMvZmF2b3JpdGUuc3ZnJztcclxuXHRcdFx0dGhpcy5jbGFzc0xpc3QucmVtb3ZlKCdmYXZvcml6ZWQnKTtcclxuXHRcdFx0TG9jYWxTdGF0ZS50b2dnbGVGYXZvcml0ZShmYWxzZSwgdGhpcy5pZCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHR0aGlzLnNyYyA9ICcvaW1nL2ljb25zL2Zhdm9yaXplZC5zdmcnO1xyXG5cdFx0XHR0aGlzLmNsYXNzTGlzdC5hZGQoJ2Zhdm9yaXplZCcpO1xyXG5cdFx0XHRMb2NhbFN0YXRlLnRvZ2dsZUZhdm9yaXRlKHRydWUsIHRoaXMuaWQpO1xyXG5cdFx0fVxyXG5cdH07XHJcblxyXG5cdGxpLmFwcGVuZChmYXZvcml6ZSk7XHJcblx0XHJcblx0cmV0dXJuIGxpO1xyXG59O1xyXG5cclxuLy8gQWRkIG1hcmtlcnMgZm9yIGN1cnJlbnQgcmVzdGF1cmFudHMgdG8gdGhlIG1hcFxyXG5hZGRNYXJrZXJzVG9NYXAgPSAocmVzdGF1cmFudHMgPSBzZWxmLnJlc3RhdXJhbnRzKSA9PiB7XHJcblx0cmVzdGF1cmFudHMuZm9yRWFjaChyZXN0YXVyYW50ID0+IHtcclxuXHRcdC8vIEFkZCBtYXJrZXIgdG8gdGhlIG1hcFxyXG5cdFx0Y29uc3QgbWFya2VyID0gTG9jYWxTdGF0ZS5nZXRNYXBNYXJrZXJGb3JSZXN0YXVyYW50KHJlc3RhdXJhbnQsIHNlbGYubWFwKTtcclxuXHRcdGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlciwgJ2NsaWNrJywgKCkgPT4ge1xyXG5cdFx0XHR3aW5kb3cubG9jYXRpb24uaHJlZiA9IG1hcmtlci51cmw7XHJcblx0XHR9KTtcclxuXHRcdHNlbGYubWFya2Vycy5wdXNoKG1hcmtlcik7XHJcblx0fSk7XHJcblxyXG59O1xyXG4iXX0=
